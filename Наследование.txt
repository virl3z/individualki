// Файл: Quadrilateral.java
// Начинается класс Quadrilateral - должен быть в отдельном файле

class Quadrilateral {
    private double side1;  // сторона 1
    private double side2;  // сторона 2
    private double side3;  // сторона 3
    private double side4;  // сторона 4
    private double angle;  // угол между сторонами 1 и 2 (в градусах)

    Quadrilateral(double side1, double side2, double side3, double side4, double angle) {
        this.side1 = side1;
        this.side2 = side2;
        this.side3 = side3;
        this.side4 = side4;
        this.angle = angle;
    }

    // getters
    double getSide1() { return side1; }
    double getSide2() { return side2; }
    double getSide3() { return side3; }
    double getSide4() { return side4; }
    double getAngle() { return angle; }

    // setters
    void setSide1(double side1) { this.side1 = side1; }
    void setSide2(double side2) { this.side2 = side2; }
    void setSide3(double side3) { this.side3 = side3; }
    void setSide4(double side4) { this.side4 = side4; }
    void setAngle(double angle) { this.angle = angle; }

    // вычисление периметра
    double perimeter() {
        return side1 + side2 + side3 + side4;
    }

    // вычисление площади (для произвольного четырехугольника - приближенно)
    double area() {
        // Площадь четырехугольника как сумма площадей двух треугольников
        double rad = Math.toRadians(angle);
        double area1 = 0.5 * side1 * side2 * Math.sin(rad);
        
        // Для второго треугольника нужны две другие стороны и угол между ними
        // В общем случае это сложно, поэтому для простоты будем считать,
        // что это выпуклый четырехугольник с известной диагональю
        // По теореме косинусов найдем диагональ между сторонами 1 и 2
        double diagonal = Math.sqrt(side1*side1 + side2*side2 - 2*side1*side2*Math.cos(rad));
        
        // Площадь второго треугольника по формуле Герона
        double p = (side3 + side4 + diagonal) / 2;
        double area2 = Math.sqrt(p * (p - side3) * (p - side4) * (p - diagonal));
        
        return area1 + area2;
    }

    // вывод информации
    public String toString() {
        return "Четырехугольник:" +
                "\nСторона 1: " + side1 +
                "\nСторона 2: " + side2 +
                "\nСторона 3: " + side3 +
                "\nСторона 4: " + side4 +
                "\nУгол между сторонами 1 и 2: " + angle + "°" +
                "\nПериметр: " + String.format("%.2f", perimeter()) +
                "\nПлощадь: " + String.format("%.2f", area());
    }
}
// Файл: Rectangle.java
// Начинается класс Rectangle - должен быть в отдельном файле

class Rectangle extends Quadrilateral {
    Rectangle(double length, double width) {
        super(length, width, length, width, 90.0); // углы 90°, противоположные стороны равны
    }

    // Дополнительные методы для прямоугольника
    double getLength() { return getSide1(); }
    double getWidth() { return getSide2(); }
    
    void setLength(double length) { 
        setSide1(length);
        setSide3(length);
    }
    
    void setWidth(double width) { 
        setSide2(width);
        setSide4(width);
    }

    // Площадь прямоугольника (переопределяем)
    @Override
    double area() {
        return getLength() * getWidth();
    }

    // Периметр прямоугольника (переопределяем)
    @Override
    double perimeter() {
        return 2 * (getLength() + getWidth());
    }

    // Вывод информации (переопределяем)
    @Override
    public String toString() {
        return "Прямоугольник:" +
                "\nДлина: " + getLength() +
                "\nШирина: " + getWidth() +
                "\nПериметр: " + String.format("%.2f", perimeter()) +
                "\nПлощадь: " + String.format("%.2f", area());
    }
}
// Файл: Square.java
// Начинается класс Square - должен быть в отдельном файле

class Square extends Rectangle {
    Square(double side) {
        super(side, side); // у квадрата длина = ширина
    }

    // Методы для квадрата
    double getSide() { return getLength(); }
    
    void setSide(double side) { 
        setLength(side);
        setWidth(side);
    }

    // Площадь квадрата (можно не переопределять, так как наследуется от Rectangle)
    @Override
    double area() {
        return getSide() * getSide();
    }

    // Периметр квадрата (можно не переопределять, так как наследуется от Rectangle)
    @Override
    double perimeter() {
        return 4 * getSide();
    }

    // Вывод информации (переопределяем)
    @Override
    public String toString() {
        return "Квадрат:" +
                "\nСторона: " + getSide() +
                "\nПериметр: " + String.format("%.2f", perimeter()) +
                "\nПлощадь: " + String.format("%.2f", area());
    }
}
// Файл: ExtendsQuadrilateral.java
// Главный класс с методом main - должен быть в отдельном файле

import java.util.Scanner;

public class ExtendsQuadrilateral {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        Scanner scLine = new Scanner(System.in);

        System.out.println("=== Демонстрация иерархии классов: Четырехугольник -> Прямоугольник -> Квадрат ===");
        
        // 1. Создаем произвольный четырехугольник
        System.out.println("\n--- Создание произвольного четырехугольника ---");
        System.out.print("Введите сторону 1: ");
        double s1 = sc.nextDouble();
        
        System.out.print("Введите сторону 2: ");
        double s2 = sc.nextDouble();
        
        System.out.print("Введите сторону 3: ");
        double s3 = sc.nextDouble();
        
        System.out.print("Введите сторону 4: ");
        double s4 = sc.nextDouble();
        
        System.out.print("Введите угол между сторонами 1 и 2 (в градусах): ");
        double angle = sc.nextDouble();
        
        Quadrilateral q = new Quadrilateral(s1, s2, s3, s4, angle);
        System.out.println("\nДанные четырехугольника:");
        System.out.println(q.toString());

        // 2. Создаем прямоугольник
        System.out.println("\n--- Создание прямоугольника ---");
        System.out.print("Введите длину прямоугольника: ");
        double length = sc.nextDouble();
        
        System.out.print("Введите ширину прямоугольника: ");
        double width = sc.nextDouble();
        
        Rectangle r = new Rectangle(length, width);
        System.out.println("\nДанные прямоугольника:");
        System.out.println(r.toString());
        
        // Изменяем параметры прямоугольника
        System.out.print("\nВведите новую длину прямоугольника: ");
        double newLength = sc.nextDouble();
        r.setLength(newLength);
        
        System.out.print("Введите новую ширину прямоугольника: ");
        double newWidth = sc.nextDouble();
        r.setWidth(newWidth);
        
        System.out.println("\nПрямоугольник после изменения:");
        System.out.println(r.toString());

        // 3. Создаем квадрат
        System.out.println("\n--- Создание квадрата ---");
        System.out.print("Введите сторону квадрата: ");
        double side = sc.nextDouble();
        
        Square s = new Square(side);
        System.out.println("\nДанные квадрата:");
        System.out.println(s.toString());
        
        // Изменяем параметры квадрата
        System.out.print("\nВведите новую сторону квадрата: ");
        double newSide = sc.nextDouble();
        s.setSide(newSide);
        
        System.out.println("\nКвадрат после изменения:");
        System.out.println(s.toString());

        // 4. Демонстрация полиморфизма
        System.out.println("\n--- Демонстрация полиморфизма ---");
        
        Quadrilateral[] figures = new Quadrilateral[3];
        figures[0] = q;  // произвольный четырехугольник
        figures[1] = r;  // прямоугольник
        figures[2] = s;  // квадрат
        
        System.out.println("\nВсе фигуры в массиве:");
        for (int i = 0; i < figures.length; i++) {
            System.out.println("\nФигура " + (i + 1) + ":");
            System.out.println(figures[i].toString());
            System.out.println("Тип фигуры: " + figures[i].getClass().getSimpleName());
        }

        sc.close();
        scLine.close();
    }
}
