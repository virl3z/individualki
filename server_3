#include <iostream>
#include <string>
#include <winsock2.h>
#include <ws2tcpip.h>

#pragma comment(lib, "ws2_32.lib")

using namespace std;

int main() {
    WSADATA wsaData;
    WSAStartup(MAKEWORD(2, 2), &wsaData);

    SOCKET serverSocket = socket(AF_INET, SOCK_STREAM, 0);

    sockaddr_in serverAddr;
    serverAddr.sin_family = AF_INET;
    serverAddr.sin_addr.s_addr = INADDR_ANY;
    serverAddr.sin_port = htons(8080);

    bind(serverSocket, (sockaddr*)&serverAddr, sizeof(serverAddr));
    listen(serverSocket, SOMAXCONN);

    cout << "Create Web Server running on port 8080..." << endl;
    cout << "Open your browser and go to: http://localhost:8080" << endl;

    while (true) {
        SOCKET clientSocket = accept(serverSocket, NULL, NULL);
        
        char buffer[4096];
        int bytes = recv(clientSocket, buffer, 4096, 0);
        
        if (bytes > 0) {
            // HTML РєРѕРґ СЃС‚СЂР°РЅРёС†С‹ СЃ CSS СЃС‚РёР»СЏРјРё РІРЅСѓС‚СЂРё
            string htmlBody = R"(
                <!DOCTYPE html>
                <html lang="ru">
                <head>
                    <meta charset="UTF-8">
                    <title>C++ РЎРµСЂРІРµСЂ</title>
                    <style>
                        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
                        .card { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; max-width: 400px; }
                        h1 { color: #0078d4; margin-bottom: 10px; }
                        p { color: #555; line-height: 1.5; }
                        .btn { display: inline-block; padding: 10px 20px; background-color: #0078d4; color: white; text-decoration: none; border-radius: 5px; margin-top: 20px; transition: 0.3s; }
                        .btn:hover { background-color: #005a9e; }
                        .footer { margin-top: 30px; font-size: 12px; color: #999; }
                    </style>
                </head>
                <body>
                    <div class="card">
                        <h1>C++ РЎРµСЂРІРµСЂ</h1>
                        <p>РЎС‚СЂР°РЅРёС†Р° СЃРіРµРЅРµСЂРёСЂРѕРІР°РЅР° С‡РµСЂРµР· http_server</p>
                    </div>
                </body>
                </html>
            )";

            // Р¤РѕСЂРјРёСЂСѓРµРј Р·Р°РіРѕР»РѕРІРєРё РѕС‚РІРµС‚Р°
            string response = 
                "HTTP/1.1 200 OK\r\n"
                "Content-Type: text/html; charset=utf-8\r\n"
                "Content-Length: " + to_string(htmlBody.length()) + "\r\n"
                "Connection: close\r\n"
                "\r\n" + htmlBody;

            send(clientSocket, response.c_str(), response.length(), 0);
        }
        closesocket(clientSocket);
    }

    closesocket(serverSocket);
    WSACleanup();
    return 0;
}
